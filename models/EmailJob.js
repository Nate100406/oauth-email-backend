import mongoose from 'mongoose';\n\nconst EmailJobSchema = new mongoose.Schema(\n  {\n    userId: { type: String, index: true, required: true },\n    to: { type: String, required: true },\n    subject: { type: String, required: true },\n    body: { type: String, required: true },\n    status: { type: String, enum: ['queued', 'scheduled', 'processing', 'sent', 'failed'], default: 'queued', index: true },\n    scheduledAt: { type: Date },\n    providerMessageId: { type: String },\n    error: { type: String },\n    attempts: { type: Number, default: 0 },\n    createdAt: { type: Date, default: Date.now },\n    updatedAt: { type: Date, default: Date.now }\n  },\n  { minimize: true }\n);\n\nEmailJobSchema.pre('save', function (next) {\n  this.updatedAt = new Date();\n  next();\n});\n\nexport default mongoose.model('EmailJob', EmailJobSchema);\n